{% set page_number = form_values.page_number %}
<div class="pagination__container">
    {% if pages_amount > 5 %}
        {% if page_number <= 2 %}
            {% for i in 1 .. 3 %}
                <button
                        class="pagination__item
                        {% if page_number == i %}pagination__item_selected{% endif %}"
                        value="{{ i }}"
                >
                    {{ i }}
                </button>
            {% endfor %}
            ...
            <button
                    class="pagination__item
                    {% if page_number == pages_amount %}pagination__item_selected{% endif %}"
                    value="{{ pages_amount }}"
            >
                {{ pages_amount }}
            </button>
        {% elseif pages_amount - page_number <= 1 %}
            <button
                    class="pagination__item
                    {% if page_number == 1 %}pagination__item_selected{% endif %}"
                    value="{{ 1 }}"
            >
                {{ 1 }}
            </button>
            ...
            {% for i in pages_amount - 2 .. pages_amount %}
                <button
                        class="pagination__item
                        {% if page_number == i %}pagination__item_selected{% endif %}"
                        value="{{ i }}"
                >
                    {{ i }}
                </button>
            {% endfor %}
        {% else %}
            <button
                    class="pagination__item
                    {% if page_number == 1 %}pagination__item_selected{% endif %}"
                    value="{{ 1 }}"
            >
                {{ 1 }}
            </button>
            ...
            {% for i in page_number - 1 .. page_number + 1 %}
                <button
                        class="pagination__item
                        {% if page_number == i %}pagination__item_selected{% endif %}"
                        value="{{ i }}"
                >
                    {{ i }}
                </button>
            {% endfor %}
            ...
            <button
                    class="pagination__item
                    {% if page_number == pages_amount %}pagination__item_selected{% endif %}"
                    value="{{ pages_amount }}"
            >
                {{ pages_amount }}
            </button>
        {% endif %}
    {% else %}
        {% for i in 1 .. pages_amount %}
            <button
                    class="pagination__item
                    {% if page_number == i %}pagination__item_selected{% endif %}"
                    value="{{ i }}"
            >
                {{ i }}
            </button>
        {% endfor %}
    {% endif %}
</div>